{% extends "layout.html" %}

{% block body %}
    <link rel="stylesheet" href="static/style.css">
    <link rel="stylesheet" href="static/DPlayer.min.css">

    <h2>{{ name }}</h2>

    <a class="logout" href="{{ url_for('logout') }} ">Logout</a>
    <p style="clear:both;"></p>

    <div id="dplayer"></div>
    <div>
        <form name="emotionForm" action="{{ url_for('submit_label') }}" method="post">
        <div>
            arousal
            <label>
                <input name="arousal" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="arousal" type="radio" value="1" />1 </label>
            <label>
                <input name="arousal" type="radio" value="2" />2 </label>
        </div>
        <div>
            excitement
            <label>
                <input name="excitement" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="excitement" type="radio" value="1" />1 </label>
            <label>
                <input name="excitement" type="radio" value="2" />2 </label>
        </div>
        <div>
            pleasure
            <label>
                <input name="pleasure" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="pleasure" type="radio" value="1" />1 </label>
            <label>
                <input name="pleasure" type="radio" value="2" />2 </label>
        </div>
        <div>
            contentment
            <label>
                <input name="contentment" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="contentment" type="radio" value="1" />1 </label>
            <label>
                <input name="contentment" type="radio" value="2" />2 </label>
        </div>
        <div>
            sleepiness
            <label>
                <input name="sleepiness" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="sleepiness" type="radio" value="1" />1 </label>
            <label>
                <input name="sleepiness" type="radio" value="2" />2 </label>
        </div>
        <div>
            depression
            <label>
                <input name="depression" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="depression" type="radio" value="1" />1 </label>
            <label>
                <input name="depression" type="radio" value="2" />2 </label>
        </div>
        <div>
            misery
            <label>
                <input name="misery" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="misery" type="radio" value="1" />1 </label>
            <label>
                <input name="misery" type="radio" value="2" />2 </label>
        </div>
        <div>
            distress
            <label>
                <input name="distress" type="radio" value="0" checked="checked"/>0 </label>
            <label>
                <input name="distress" type="radio" value="1" />1 </label>
            <label>
                <input name="distress" type="radio" value="2" />2 </label>
        </div>
        <div class="submit">
            <input type="submit" value="Submit" name="submitToSql" href="javascript: submitform()">
            <input type="submit" value="Next" name="nextVideo" href="javascript: labelingNextVideo()">
        </div>
            <!--隐藏的input,设置视频name-->
        <input type="hidden" name="video_name" value="{{ name }}">
        </form>
    </div>
    <script src="static/flv.min.js"></script>
    <script src="static/DPlayer.min.js"></script>
    <script>
        const dp = new DPlayer({
            container: document.getElementById('dplayer'),
            autoplay: true,
            video: {
                url: 'video/{{ name }}',
                type: 'flv'
            },
            danmaku: {
                id: '{{ name }}',
                api: 'https://api.prprpr.me/dplayer/'
            }
        });

        function submitform() {
            var submitToSql = document.getElementsByName("submitToSql");
            submitToSql.disabled = true;//提交后禁用,防止再没submit时重复多次点击
            var myForm = document.getElementsByName("emotionForm");
            myForm.submit();
        }
        
        function labelingNextVideo() {
            
        }

        function labelingPreVideo() {

        }
    </script>
{% endblock %}